
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>tes package &#8212; tespackage 0.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="tes" href="modules.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tes-package">
<h1>tes package<a class="headerlink" href="#tes-package" title="Permalink to this headline">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-tes.analysis">
<span id="tes-analysis-module"></span><h2>tes.analysis module<a class="headerlink" href="#module-tes.analysis" title="Permalink to this headline">¶</a></h2>
<p>Module written by Dr. Geoff Gillet for calibration and modelling.</p>
<p>This module was kept as it was in previous version for backward compatibility.</p>
<dl class="py class">
<dt class="sig sig-object py" id="tes.analysis.Counts">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">Counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncorrelated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_noise_threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.Counts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Counts.count">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">count</span></span><a class="headerlink" href="#tes.analysis.Counts.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Counts.has_noise_threshold">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">has_noise_threshold</span></span><a class="headerlink" href="#tes.analysis.Counts.has_noise_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Counts.uncorrelated">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">uncorrelated</span></span><a class="headerlink" href="#tes.analysis.Counts.uncorrelated" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Counts.vacuum">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">vacuum</span></span><a class="headerlink" href="#tes.analysis.Counts.vacuum" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.analysis.Guess">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">Guess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.Guess" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Guess.bin_c">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">bin_c</span></span><a class="headerlink" href="#tes.analysis.Guess.bin_c" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Guess.f">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">f</span></span><a class="headerlink" href="#tes.analysis.Guess.f" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Guess.hist">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">hist</span></span><a class="headerlink" href="#tes.analysis.Guess.hist" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Guess.max_i">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">max_i</span></span><a class="headerlink" href="#tes.analysis.Guess.max_i" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.analysis.Guess.thresholds">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">thresholds</span></span><a class="headerlink" href="#tes.analysis.Guess.thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.analysis.MixtureModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">MixtureModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zero_loc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_likelihood</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">converged</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_noise_threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.MixtureModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.analysis.MixtureModel" title="tes.analysis.MixtureModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.analysis.MixtureModel</span></code></a></p>
<p>Subclass of namedtuple used to represent a mixture model.</p>
<dl class="simple">
<dt>fields:</dt><dd><dl class="field-list simple">
<dt class="field-odd">param_list</dt>
<dd class="field-odd"><p>list of parameters for each distribution in the mixture.</p>
</dd>
<dt class="field-even">thresholds</dt>
<dd class="field-even"><p>the intersection of neighbouring distributions in the
mixture.</p>
</dd>
<dt class="field-odd">zero_loc</dt>
<dd class="field-odd"><p>Fixed location parameter used to fit the first distribution,
or None if the location parameter was fitted.</p>
</dd>
<dt class="field-even">log_likelihood</dt>
<dd class="field-even"><p>the log of the likelihood that the model could produce
the data used to construct it.</p>
</dd>
<dt class="field-odd">converged</dt>
<dd class="field-odd"><p>boolean indicating that the expectation maximisation
algorithm terminated normally when fitting the model.</p>
</dd>
<dt class="field-even">dist</dt>
<dd class="field-even"><p>the type of distribution forming the components of the mixture,
(see scipy.stats).</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tes.analysis.MixtureModel.cdf">
<span class="sig-name descname"><span class="pre">cdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.MixtureModel.cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>evaluate the pdf(s) of the distribution(s) selected by d at x.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – value(s) where to the function is evaluated.</p></li>
<li><p><strong>d</strong> – selects element(s) of param_list that parameterise the
distributions. If None all distributions in param_list are
used.</p></li>
<li><p><strong>scale</strong> (<em>bool</em>) – when true return the scaled pdf, the scale is always
param[-1].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray shape (len(d), len(x)) containing the pdf(s) or a
single value if only 1 point in 1 distribution is selected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.analysis.MixtureModel.load">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.MixtureModel.load" title="Permalink to this definition">¶</a></dt>
<dd><p>load model from .npz file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – filename excluding extension”</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>instance of MixtureModel.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.analysis.MixtureModel.pdf">
<span class="sig-name descname"><span class="pre">pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.MixtureModel.pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>evaluate the pdf(s) of the distribution(s) selected by d at x.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – value(s) where to the function is evaluated.</p></li>
<li><p><strong>d</strong> – selects element(s) of param_list that parameterise the
distributions. If None all distributions in param_list are
used.</p></li>
<li><p><strong>scale</strong> (<em>bool</em>) – when true return the scaled pdf, the scale is always
param[-1].</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray shape (len(d), len(x)) containing the pdf(s) or a
single value if only 1 point in 1 distribution is selected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.analysis.MixtureModel.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.MixtureModel.save" title="Permalink to this definition">¶</a></dt>
<dd><p>save model as .npz file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> – filename to save as, excluding extension”</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.analysis.Povm">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">Povm</span></span><a class="headerlink" href="#tes.analysis.Povm" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal notranslate"><span class="pre">tes.analysis.povm</span></code></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.coherent_ml">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">coherent_ml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.coherent_ml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.coherent_neg_ll">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">coherent_neg_ll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.coherent_neg_ll" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.coincidence">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">coincidence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.coincidence" title="Permalink to this definition">¶</a></dt>
<dd><p>Find coincidences between two channels returning indices of partner events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abs_time</strong> (<em>ndarray</em>) – absolute times.</p></li>
<li><p><strong>mask</strong> (<em>ndarray</em>) – ndarray of bool that identifies the channels in
abs_time. For abs_times where mask is False, time t is
coincident if abs_time+low &lt;= t &lt;= abs_time+high. If
the mask is True t is coincident if
abs_time-high &lt;= t &lt;= abs_time-low.</p></li>
<li><p><strong>low</strong> (<em>float</em>) – the low side of the coincidence window.</p></li>
<li><p><strong>high</strong> (<em>float</em>) – the high side of the coincidence whindw.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(coinc, coinc_mask) where coinc is a ndarray of indices of the
coincident event in the other channel. When more than one event is
found in the window the negated value of the first index is
entered.
coinc_mask is a ndarray of bool indicating where exactly one
event was found in the window.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.count">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_noise_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coinc_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">herald_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.count" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – measurement data.</p></li>
<li><p><strong>measurement_model</strong> (<a class="reference internal" href="#tes.analysis.MixtureModel" title="tes.analysis.MixtureModel"><em>MixtureModel</em></a>) – model created using
expectation_maximisation.</p></li>
<li><p><strong>vacuum</strong> (<em>bool</em>) – estimate vacuum terms using coinc_mask and herald_mask.</p></li>
<li><p><strong>coinc_mask</strong> – ndarray of bool indicating coincidence.</p></li>
<li><p><strong>herald_mask</strong> – ndarray of bool indicating which events are in the
heralding channel.</p></li>
<li><p><strong>has_noise_threshold</strong> – When True model.thresholds[1] represents the
boundary between noise and 1 photon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Counts(count, uncorrelated, vacuum). Where count is an ndarray of
counts for each photon number
and len(count)=len(measurement_model.thresholds). uncorrelated is a
ndarray the same shape as count and counts
events not correlated with the herald. uncorrelated is only
calculated when coinc_mask and herald_mask are supplied.
vacuum replicates the parameter value and indicates that count[0]
contains the vacuum count.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.displaced_thermal">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">displaced_thermal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.displaced_thermal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.displaced_vacuum">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">displaced_vacuum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.displaced_vacuum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.drive_correlation">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">drive_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detection_mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.drive_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the temporal cross-correlation between a channel measuring a
heralding signal, ie the laser drive pulse, and a channel detecting photons.
The correlation is calculated for the different photon numbers determined by
the thresholds parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abs_time</strong> (<em>ndarray</em>) – absolute timestamp sequence.</p></li>
<li><p><strong>detection_mask</strong> (<em>ndarray</em>) – boolean mask that identifies the entries in
abs_time belonging to the photon channel,
other entries are assumed to be the heralding
channel.</p></li>
<li><p><strong>data</strong> (<em>ndarray</em>) – energy measurement data for the photon channel.</p></li>
<li><p><strong>masks</strong> (<em>ndarray</em>) – boolean masks that are appied to
abs_time[detection_mask] and indicate which detections
are assigned which threshold.
Shape(N, len(abs_time[detection_mask]))</p></li>
<li><p><strong>r</strong> – the range of heralding channel delays to cross correlate.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print progress message as each threshold is processed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of ndarrays representing the cross correlation.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>abs_time[mask] and data must be the same length.
TODO speed up the algorithm.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.expectation_maximisation">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">expectation_maximisation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data</span></em>, <em class="sig-param"><span class="pre">initial_thresholds</span></em>, <em class="sig-param"><span class="pre">has_noise_threshold=False</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em>, <em class="sig-param"><span class="pre">tol=0.01</span></em>, <em class="sig-param"><span class="pre">max_iter=30</span></em>, <em class="sig-param"><span class="pre">verbose=True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.expectation_maximisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit a mixture of distributions to data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – the measurement data.</p></li>
<li><p><strong>initial_thresholds</strong> – initial thresholds that divide data into
individual distributions in the mixture.</p></li>
<li><p><strong>fix_noise</strong> (<em>bool</em>) – When True keep threshold[1] fixed.</p></li>
<li><p><strong>dist</strong> – the type of distribution to use (see scipy.stats)</p></li>
<li><p><strong>tol</strong> (<em>float</em>) – termination tolerance for change in log_likelihood.</p></li>
<li><p><strong>max_iter</strong> (<em>int</em>) – max iterations of expectation maximisation to use.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – print progress during optimisation.</p></li>
<li><p><strong>normalise</strong> (<em>bool</em>) – passed to maximise step, thresholds are calculated
using the intersection of the normalised distributions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(param_list, zero_loc, log_likelihood, converged) as a named tuple.
Where param_list is a list of parameter values for distribution in
the mixture, zero_loc is the arg used to fit, log_likelihood is the
log_likelihood of the fit, converged is a bool indicating normal
termination.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>Uses The Expectation maximisation algorithm with hard assignment of
responsibilities.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.fit_state_least_squares">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">fit_state_least_squares</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_outcome</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thermal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">N</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">150</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.fit_state_least_squares" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.guess_thresholds">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">guess_thresholds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxima_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.guess_thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess the photon number thresholds using a smoothed histogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – the measurement data.</p></li>
<li><p><strong>bins</strong> – argument to numpy.histogram.</p></li>
<li><p><strong>win_length</strong> (<em>int</em>) – Hanning window length used for smoothing.</p></li>
<li><p><strong>maxima_threshold</strong> (<em>int</em>) – passed to maxima function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(hist, f, bin_c, max_i, thresholds) as a named
tuple. Where hist is the histogram
generated by np.histogram(), f is the smoothed histogram, bin_c is a
ndarray of bin centers, max_i are the indices of the maxima in f,
and thresholds is a ndarray of threshold guesses.</p>
</dd>
<dt class="field-odd">Notes</dt>
<dd class="field-odd"><p>The smoothing is achieved by convolving the Hanning window with a
histogram generated using numpy.histogram. The guess still needs
some human sanity checks, especially multiple maxima per photon
peak. Use plot_guess() and adjust window and maxima_threshold to
remove them.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.hard_expectation">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">hard_expectation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">param_list</span></em>, <em class="sig-param"><span class="pre">fix_noise=None</span></em>, <em class="sig-param"><span class="pre">normalise=False</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.hard_expectation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the thresholds for a mixture model that define the data
partitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>param_list</strong> (<em>list</em>) – list of parameters for the distributions in the
mixture model, returned by expectation_maximisation().</p></li>
<li><p><strong>fix_noise</strong> – Fix threshold[1] at this value.</p></li>
<li><p><strong>normalise</strong> (<em>bool</em>) – calculate thresholds based on a mixture of
normalised pdf’s.</p></li>
<li><p><strong>dist</strong> – type of distribution</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray of threshold values.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.hard_maximisation">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">hard_maximisation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data</span></em>, <em class="sig-param"><span class="pre">thresholds</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em>, <em class="sig-param"><span class="pre">verbose=True</span></em>, <em class="sig-param"><span class="pre">has_noise_threshold=False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.hard_maximisation" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit distributions to the data partitioned by thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – the data to model.</p></li>
<li><p><strong>thresholds</strong> – thresholds that divide data into separate distributions.</p></li>
<li><p><strong>dist</strong> – type of distribution to fit (scipy.stats).</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Print fitted distribution parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of parameters for each distribution.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.maxima">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">maxima</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.maxima" title="Permalink to this definition">¶</a></dt>
<dd><p>Find local maxima of f using rising zero crossings of the gradient of f.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – function to find maxima for</p></li>
<li><p><strong>thresh</strong> – Only return a maxima if f[maxima]&gt;thresh</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of maxima.</p>
</dd>
<dt class="field-odd">Notes</dt>
<dd class="field-odd"><p>Used to find the maxima of the smoothed measurement histogram.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.mixture_model_ll">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">mixture_model_ll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">data</span></em>, <em class="sig-param"><span class="pre">param_list</span></em>, <em class="sig-param"><span class="pre">has_noise_threshold=False</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.mixture_model_ll" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the log likelihood of a mixture model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – the data used to construct the model.</p></li>
<li><p><strong>param_list</strong> – list of parameters for each distribution in the model.</p></li>
<li><p><strong>dist</strong> – the type of distribution to use (see scipy.stats).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the log likelihood.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.normalised_pdf">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">normalised_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">x</span></em>, <em class="sig-param"><span class="pre">params</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.normalised_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function, calculate normalised pdf at each x for dist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>union</em><em>[</em><em>numpy.ndarray</em><em>, </em><em>int</em><em>]</em>) – calculate the pdf a each x</p></li>
<li><p><strong>params</strong> (<em>iterable</em>) – fitted distribution parameters</p></li>
<li><p><strong>dist</strong> – type of distribution (see scipy.stats)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray containing pdf(x)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.outcome_probabilities">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">outcome_probabilities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.outcome_probabilities" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.partition">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ith partition of the data as defined by thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>ndarray</em>) – the data to partition.</p></li>
<li><p><strong>thresholds</strong> (<em>iterable</em>) – the threshold values that partition data.</p></li>
<li><p><strong>i</strong> (<em>int</em>) – the partition to return, the ith partition is defined as
threshold[i] &lt; data &lt;= threshold[i+1]. The last partition,
when i = len(thresholds-1), is defined as</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray of the data in the partition.</p>
</dd>
<dt class="field-odd">Note</dt>
<dd class="field-odd"><p>This is used to assign a hard responsibility in the expectation
maximisation algorithm used to fit data to a mixture model.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.plot_guess">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">plot_guess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\\texttt{area}'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.plot_guess" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.plot_mixture_model">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">plot_mixture_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xrange</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalised</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'\\texttt{area}'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.plot_mixture_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a mixture model optionally including a histogram of the modeled data.
if no data is None x must not be None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<a class="reference internal" href="#tes.analysis.MixtureModel" title="tes.analysis.MixtureModel"><em>MixtureModel</em></a>) – the mixture model.</p></li>
<li><p><strong>data</strong> (<em>ndarray</em>) – the data to histogram.</p></li>
<li><p><strong>xrange</strong> (<em>tuple</em>) – the x range to plot.</p></li>
<li><p><strong>normalised</strong> (<em>bool</em>) – normalise the model distributions.</p></li>
<li><p><strong>bins</strong> – passed to numpy.histogram().</p></li>
<li><p><strong>bar</strong> (<em>bool</em>) – Plot bars instead of markers.</p></li>
<li><p><strong>figsize</strong> – passed to matplotlib.pyplot.figure().</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the figure handle.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.plot_state_fit">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">plot_state_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nbar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.plot_state_fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.povm_elements">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">povm_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measurement_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.povm_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>estimate the elements of the system povm from the measurement model and the
counting data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>array like</em>) – measurement data.</p></li>
<li><p><strong>measurement_model</strong> (<em>mixturemodel</em>) – model created using
expectation_maximisation.</p></li>
<li><p><strong>counts</strong> (<a class="reference internal" href="#tes.analysis.Counts" title="tes.analysis.Counts"><em>Counts</em></a>) – the count data returned by count().</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(elements count vacuum). where counts is a ndarray with
shape (len(n)) containing the count for each measurement outcome
in n. elements is a ndarray with
shape(len(n), len(measurement_model.thresholds)) the first index is
the fock state, the second is the outcome. The contents of elements
is the probability of the outcome when measuring fock state.</p>
</dd>
<dt class="field-odd">Notes</dt>
<dd class="field-odd"><p>POVM elements is indexed by (fock state, measurement outcome).
The last threshold in the measurement model marks the boundary of
the data that was used to create the model, it is <em>not</em> altered by
the expectation maximisation algorithm and is essentially a guess.
The second last threshold is the boundary of the overflow bin,
this last photon number bin is counts detections of &gt;=
len(measurement_model.param_list)-2 photons.
TODO expand and clarify description.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.resize_vector">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">resize_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.resize_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.retime">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">retime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tdat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fidx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tidx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.retime" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.scaled_pdf">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">scaled_pdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">x</span></em>, <em class="sig-param"><span class="pre">params</span></em>, <em class="sig-param"><span class="pre">dist=&lt;scipy.stats._continuous_distns.gamma_gen</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.scaled_pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function, calculate pdf at each x for dist, normalisation is
given by params[-1].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>union</em><em>[</em><em>numpy.ndarray</em><em>, </em><em>int</em><em>]</em>) – calculate the pdf a each x</p></li>
<li><p><strong>params</strong> (<em>iterable</em>) – fitted distribution parameters</p></li>
<li><p><strong>dist</strong> – type of distribution (see scipy.stats)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray containing pdf(x)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.thermal_ml">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">thermal_ml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.thermal_ml" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.thermal_neg_ll">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">thermal_neg_ll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">povm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_photon_number</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.thermal_neg_ll" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.threshold_masks">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">threshold_masks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.threshold_masks" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – </p></li>
<li><p><strong>model</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.window">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.window" title="Permalink to this definition">¶</a></dt>
<dd><p>get offsets from the current index i in abs_time that are in the relative
time window defined by low and high.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> (<em>int</em>) – current abs_time index.</p></li>
<li><p><strong>abs_time</strong> (<em>ndarray</em>) – absolute times.</p></li>
<li><p><strong>low</strong> – low end of relative window.</p></li>
<li><p><strong>high</strong> – high end of relative window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(low_o, high_o) coincident times are abs_time[low_o:i+high_o]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.x_correlation">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">x_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.x_correlation" title="Permalink to this definition">¶</a></dt>
<dd><p>Cross correlation of timestamp sequences s1 and s2 over the delay range r.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>ndarray</em>) – Monotonically increasing timestamp sequence.</p></li>
<li><p><strong>s2</strong> (<em>ndarray</em>) – Monotonically increasing timestamp sequence.</p></li>
<li><p><strong>r</strong> – range of delays added to s1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ndarray representing the cross correlation function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.analysis.xcor">
<span class="sig-prename descclassname"><span class="pre">tes.analysis.</span></span><span class="sig-name descname"><span class="pre">xcor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.analysis.xcor" title="Permalink to this definition">¶</a></dt>
<dd><p>Count correlations between timestamp sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s1</strong> (<em>ndarray</em>) – Monotonically increasing timestamp sequence.</p></li>
<li><p><strong>s2</strong> (<em>ndarray</em>) – Monotonically increasing timestamp sequence.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>correlation count.</p>
</dd>
<dt class="field-odd">Notes</dt>
<dd class="field-odd"><p>iterates over s1 and performs a linear search of  s2 for the s1
timestamp.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.base">
<span id="tes-base-module"></span><h2>tes.base module<a class="headerlink" href="#module-tes.base" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>VhdlEnum</p></li>
<li><p>TraceType</p></li>
<li><p>Signal</p></li>
<li><p>Height</p></li>
<li><p>Timing</p></li>
<li><p>detection</p></li>
<li><p>Payload</p></li>
<li><p>lookup</p></li>
</ol>
<p>Function:
1) pulse_fmt</p>
<dl class="py class">
<dt class="sig sig-object py" id="tes.base.Detection">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">Detection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.Detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>Value of the event.packet register.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Detection.area">
<span class="sig-name descname"><span class="pre">area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.Detection.area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Detection.pulse">
<span class="sig-name descname"><span class="pre">pulse</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.Detection.pulse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Detection.rise">
<span class="sig-name descname"><span class="pre">rise</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.Detection.rise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Detection.trace">
<span class="sig-name descname"><span class="pre">trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.Detection.trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.Height">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">Height</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.Height" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>Value of the event.height register.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Height.cfd_height">
<span class="sig-name descname"><span class="pre">cfd_height</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.Height.cfd_height" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Height.cfd_high">
<span class="sig-name descname"><span class="pre">cfd_high</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.Height.cfd_high" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Height.max_slope">
<span class="sig-name descname"><span class="pre">max_slope</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.Height.max_slope" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Height.peak">
<span class="sig-name descname"><span class="pre">peak</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.Height.peak" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.Payload">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">Payload</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.Payload" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>Payload type in capture files.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.area">
<span class="sig-name descname"><span class="pre">area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.Payload.area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.average_trace">
<span class="sig-name descname"><span class="pre">average_trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#tes.base.Payload.average_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.bad_frame">
<span class="sig-name descname"><span class="pre">bad_frame</span></span><em class="property"> <span class="pre">=</span> <span class="pre">9</span></em><a class="headerlink" href="#tes.base.Payload.bad_frame" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.dot_product">
<span class="sig-name descname"><span class="pre">dot_product</span></span><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#tes.base.Payload.dot_product" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.dot_product_trace">
<span class="sig-name descname"><span class="pre">dot_product_trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#tes.base.Payload.dot_product_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.mca">
<span class="sig-name descname"><span class="pre">mca</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#tes.base.Payload.mca" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.pulse">
<span class="sig-name descname"><span class="pre">pulse</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.Payload.pulse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.rise">
<span class="sig-name descname"><span class="pre">rise</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.Payload.rise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.single_trace">
<span class="sig-name descname"><span class="pre">single_trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.Payload.single_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Payload.tick">
<span class="sig-name descname"><span class="pre">tick</span></span><em class="property"> <span class="pre">=</span> <span class="pre">7</span></em><a class="headerlink" href="#tes.base.Payload.tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.Signal">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">Signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.Signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>The signal recorded in a trace.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Signal.f">
<span class="sig-name descname"><span class="pre">f</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.Signal.f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Signal.none">
<span class="sig-name descname"><span class="pre">none</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.Signal.none" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Signal.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.Signal.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Signal.s">
<span class="sig-name descname"><span class="pre">s</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.Signal.s" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.Timing">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">Timing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.Timing" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>Value of the event.timing register.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Timing.cfd_low">
<span class="sig-name descname"><span class="pre">cfd_low</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.Timing.cfd_low" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Timing.max_slope">
<span class="sig-name descname"><span class="pre">max_slope</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.Timing.max_slope" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Timing.pulse_threshold">
<span class="sig-name descname"><span class="pre">pulse_threshold</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.Timing.pulse_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.Timing.slope_threshold">
<span class="sig-name descname"><span class="pre">slope_threshold</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.Timing.slope_threshold" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.TraceType">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">TraceType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.TraceType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>Value of the trace_type event.trace_type register.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.TraceType.average">
<span class="sig-name descname"><span class="pre">average</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.base.TraceType.average" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.TraceType.dot_product">
<span class="sig-name descname"><span class="pre">dot_product</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.base.TraceType.dot_product" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.TraceType.dot_product_trace">
<span class="sig-name descname"><span class="pre">dot_product_trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.base.TraceType.dot_product_trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.base.TraceType.single">
<span class="sig-name descname"><span class="pre">single</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.base.TraceType.single" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.base.VhdlEnum">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">VhdlEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.VhdlEnum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tes.base.VhdlEnum.latex">
<span class="sig-name descname"><span class="pre">latex</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.VhdlEnum.latex" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.base.VhdlEnum.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.VhdlEnum.select" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.base.lookup">
<span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.lookup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.base.pulse_fmt">
<span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">pulse_fmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.pulse_fmt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.base.rise2_fmt">
<span class="sig-prename descclassname"><span class="pre">tes.base.</span></span><span class="sig-name descname"><span class="pre">rise2_fmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.base.rise2_fmt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tes.calibration">
<span id="tes-calibration-module"></span><h2>tes.calibration module<a class="headerlink" href="#module-tes.calibration" title="Permalink to this headline">¶</a></h2>
<p>Functions to calibrate the TES detector.</p>
<p>Author: Leonardo Assis Morais</p>
<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.area_histogram">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">area_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_area</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">areas</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.area_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an area histogram.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_area</strong> (<em>float</em>) – <dl class="simple">
<dt>Maximum area allowed (remove extremely large areas not due to</dt><dd><p>photon detections).</p>
</dd>
</dl>
</p></li>
<li><p><strong>bin_number</strong> (<em>int</em>) – Number of histogram bins.</p></li>
<li><p><strong>areas</strong> (<em>np.ndarray</em>) – Data with areas of TES pulses.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>bin_centre</strong> (<em>np.darray</em>) – Array with the positions of the histograms bin centres.
Used for plotting the histogram with correct values
for areas in the x-axis.</p></li>
<li><p><strong>counts</strong> (<em>np.ndarray</em>) – Histogram counts.</p></li>
<li><p><strong>error</strong> (<em>np.ndarray</em>) – Standard deviation for counts
(poissonian distribution assumed: std. = sqrt(counts).</p></li>
<li><p><strong>bin_width</strong> (<em>float</em>) – Bin width for plotting.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.find_thresholds">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">find_thresholds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gauss_fit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxima_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_centre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">const</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.find_thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the counting thresholds given a gaussian fit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gauss_fit</strong> (<em>lmfit fit</em>) – Result of a least square minimisation using lmfit.</p></li>
<li><p><strong>maxima_list</strong> (<em>np.ndarray</em>) – Array with the positions of maxima points.</p></li>
<li><p><strong>bin_centre</strong> (<em>np.ndarray</em>) – Array with centre bin positions for histogram.</p></li>
<li><p><strong>counts</strong> (<em>np.ndarray</em>) – List with counts for histogram.</p></li>
<li><p><strong>const</strong> (<em>float</em>) – Value used for scipy.optimise.brentq.
See ‘Notes’ below for more information.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>dist</strong> (<em>list</em>) – List with the normalised distributions.</p></li>
<li><p><em>new_thresh_list</em> – List of counting thresholds.</p></li>
<li><p><em>Requires</em></p></li>
<li><p><em>——–</em> – scipy.optimize.brentq</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Sometimes this function breaks if brentq function cannot find
roots. If that is the case, slowly increase the value of the
variable ‘const’.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.gaussian_model">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">gaussian_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitting</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_centre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.gaussian_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement mixture model comprised of gaussians.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fitting</strong> (<em>class lmfit.minimizer.MinimizerResult</em>) – Result from fitting using lmfit.</p></li>
<li><p><strong>counts</strong> (<em>np.ndarray</em>) – Histogram counts.</p></li>
<li><p><strong>bin_centre</strong> (<em>np.darray</em>) – Array with the positions of the histograms bin centres.
Used for plotting the histogram with correct values
for areas in the x-axis.</p></li>
<li><p><strong>max_idx</strong> (<em>int</em>) – Number of gaussian distributions used in the model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>model</strong> – Model of composed of sum of gaussians using the results
obtained from the fitting with lmfit.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.guess_histogram">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">guess_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">areas</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_area</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.guess_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Create first guess for histogram fitting.</p>
<p>Using a Hann function to create an approximate fit for the
data, estimates the position for the centre of the different
peaks in the area histogram.</p>
<p>WARNING:
The Hann window fitting must be checked to see if
it is reasonable using the function plot_guess.</p>
<blockquote>
<div><p>maxima</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bin_number</strong> (<em>int</em>) – Number of bins used in histogram.</p></li>
<li><p><strong>win_length</strong> (<em>int</em>) – Length of the Hann window used in the fit.</p></li>
<li><p><strong>minimum</strong> (<em>int</em>) – Minimum value for the function maxima to consider
a given number of counts as a peak.</p></li>
<li><p><strong>max_area</strong> (<em>float</em>) – Areas &gt; max_area are considered invalid counts and
removed from the analysis. Used to remove event with
anomalous areas.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>counts</strong> (<em>np.darray</em>) – Array with counts for each histogram bin.</p></li>
<li><p><strong>smooth_hist</strong> (<em>np.darray</em>) – Array with the continuous fit used to determine
the positions of the maxima in the data.</p></li>
<li><p><strong>bin_centre</strong> (<em>np.darray</em>) – Array with the positions of the histograms bin centres.
Used for plotting the histogram with correct values
for areas in the x-axis.</p></li>
<li><p><strong>max_i</strong> (<em>list</em>) – List with the position of the maxima points.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.maxima">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">maxima</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.maxima" title="Permalink to this definition">¶</a></dt>
<dd><p>Find local maxima of a function f.</p>
<p>Uses rising zero crossings of the gradient of f to find function
local maxima.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> (<em>ndarray</em>) – Function f to be analysed.</p></li>
<li><p><strong>thresh</strong> (<em>int</em>) – Only return a maxima if f[maxima] &gt; thresh.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>array</em></p></li>
<li><p><em>Array with maxima points of f.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.plot_area">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">plot_area</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_centre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_steps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.plot_area" title="Permalink to this definition">¶</a></dt>
<dd><p>Require area_histogram to be run before.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>figure axis</em>) – Figure axis of the figure to be plotted.</p></li>
<li><p><strong>bin_centre</strong> (<em>np.darray</em>) – Array with the positions of the histograms bin centres.
Used for plotting the histogram with correct values
for areas in the x-axis.</p></li>
<li><p><strong>counts</strong> (<em>np.ndarray</em>) – Histogram counts.</p></li>
<li><p><strong>error</strong> (<em>np.ndarray</em>) – Standard deviation for counts</p></li>
<li><p><strong>model</strong> (<em>np.ndarray</em>) – Model generated with gaussian_model</p></li>
<li><p><strong>plot_steps</strong> (<em>int</em>) – Number of histogram points to be skipped when plotting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>None.</em></p></li>
<li><p><em>Requires</em></p></li>
<li><p><em>——–</em></p></li>
<li><p><em>area_histogram</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.plot_guess">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">plot_guess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_centres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.plot_guess" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the histogram with an educated guess for its fitting.</p>
<p>Visual check if the maxima positions determined by the
guess_thresholds are reasonable.</p>
<p>Requires guess_thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>figure axis</em>) – Figure axis of the figure to be plotted.</p></li>
<li><p><strong>hist</strong> (<em>np.darray</em>) – Histogram obtained from the guess_thresholds function.</p></li>
<li><p><strong>smooth_hist</strong> – Smoothed histogram obtained from the guess_thresholds
function.</p></li>
<li><p><strong>bin_centres</strong> – Centre of the bins for the histogram. Obtained from the
guess_thresholds function.</p></li>
<li><p><strong>max_i</strong> (<em>list</em>) – List with the position of the maxima points for the
peaks in histogram. Obtained from the guess_thresholds
function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ax</strong> – Axis for the figure with the histogram, smoothed histogram
and maxima points plotted.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>figure axis</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.plot_histogram">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">plot_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_number</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.plot_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot histogram of TES characteristics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>figure axis</em>) – Figure axis of the figure to be plotted.</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Data extracted from TES (height, area, length, maximum slope).</p></li>
<li><p><strong>bin_number</strong> (<em>int</em>) – Number of histogram bins.</p></li>
<li><p><strong>measurement</strong> (<em>str</em>) – Type of measurement plotted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.plot_normalised">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">plot_normalised</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_centre</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.plot_normalised" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the graph with the normalised distributions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<em>figure axis</em>) – Figure axis of the figure to be plotted.</p></li>
<li><p><strong>max_i</strong> (<em>np.ndarray</em>) – Number of distributions to be plotted.</p></li>
<li><p><strong>bin_centre</strong> (<em>np.ndarray</em>) – x-axis positions for histogram data.</p></li>
<li><p><strong>dist</strong> (<em>np.ndarray</em>) – Distributions to be plotted.</p></li>
<li><p><strong>thresholds</strong> (<em>np.ndarray</em>) – Counting thresholds positions to be plotted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.calibration.residual_gauss">
<span class="sig-prename descclassname"><span class="pre">tes.calibration.</span></span><span class="sig-name descname"><span class="pre">residual_gauss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i_var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eps_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_idx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.calibration.residual_gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Gaussian model to fit histogram from TES detections.</p>
<p>Model composed of a sum of N gaussian distributions, to be used
with the lmfit package to fit histograms from TES detections.
Returns the residual between data and model, divided by the
error in the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>lmfit object</em>) – List of parameters to be used in the fit.</p></li>
<li><p><strong>i_var</strong> – Independent variable to be used in the fit.</p></li>
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Data to be fitted.</p></li>
<li><p><strong>eps_data</strong> (<em>np.ndarray</em>) – Standard deviation of each data point.</p></li>
<li><p><strong>max_idx</strong> (<em>int</em>) – Number of gaussian distributions used in the model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>residual</strong> – Array with the different between data and model
divided by the error in data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.counts">
<span id="tes-counts-module"></span><h2>tes.counts module<a class="headerlink" href="#module-tes.counts" title="Permalink to this headline">¶</a></h2>
<p>Module to assist in counting photons routine.</p>
<p>1) coincidence
3) window</p>
<dl class="py class">
<dt class="sig sig-object py" id="tes.counts.Counts">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.counts.</span></span><span class="sig-name descname"><span class="pre">Counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncorrelated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.counts.Counts" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="tes.counts.Counts.count">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">count</span></span><a class="headerlink" href="#tes.counts.Counts.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.counts.Counts.uncorrelated">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">uncorrelated</span></span><a class="headerlink" href="#tes.counts.Counts.uncorrelated" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.counts.Counts.vacuum">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">vacuum</span></span><a class="headerlink" href="#tes.counts.Counts.vacuum" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.counts.coincidence">
<span class="sig-prename descclassname"><span class="pre">tes.counts.</span></span><span class="sig-name descname"><span class="pre">coincidence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abs_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.counts.coincidence" title="Permalink to this definition">¶</a></dt>
<dd><p>Find coincidences between two channels.</p>
<p>After finding a coincidence, return indices of coincident events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abs_time</strong> (<em>ndarray</em>) – Array where each entry corresponds to the time which the
detection was performed with respect to an initial time t0.
This array can be constructed using
np.cumsum(CaptureData(datapath).times).</p></li>
<li><p><strong>mask</strong> (<em>ndarray bool</em>) – Identifies the channels in abs_time.
For abs_times where mask is False, time t is coincident if
abs_time+low &lt;= t &lt;= abs_time+high.
If the mask is True t is coincident if
abs_time-high &lt;= t &lt;= abs_time-low.</p></li>
<li><p><strong>low</strong> (<em>float</em>) – The starting of the coincidence window.</p></li>
<li><p><strong>high</strong> (<em>float</em>) – The ending side of the coincidence window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><strong>coincidences(coinc, coinc_mask)</strong> (<em>tuple</em>) –</p>
<dl class="simple">
<dt>coinc<span class="classifier">ndarray</span></dt><dd><p>Indexes of the coincident event in the other channel.
When more than one event is found in the window the negated
value of the first index is entered.</p>
</dd>
<dt>coinc_mask<span class="classifier">ndarray bool</span></dt><dd><p>Indicates where exactly one event was found in the window.</p>
</dd>
</dl>
</li>
<li><p><em>Requires</em></p></li>
<li><p><em>———</em> – tes.counts.window</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.counts.counting_photons">
<span class="sig-prename descclassname"><span class="pre">tes.counts.</span></span><span class="sig-name descname"><span class="pre">counting_photons</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vacuum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coinc_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">herald_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.counts.counting_photons" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert TES pulse area in photon-number.</p>
<p>Given an TES pulse area data set and the calibration (list with the
counting thresholds, passed through thresh_list), returns
the number of counts for each Fock state.</p>
<p>If the mask with the heralding source is given, also includes
the number of vacuum counts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – Measured data.</p></li>
<li><p><strong>thresh_list</strong> (<em>np.ndarray</em>) – List with the counting thresholds obtained after detector
calibration.</p></li>
<li><p><strong>vacuum</strong> (<em>bool</em>) – If true, it will use the herald_mask to calculate vacuum
counts</p></li>
<li><p><strong>coinc_mask</strong> (<em>ndarray</em><em>, </em><em>bool</em>) – Mask indicating coincidence counts.</p></li>
<li><p><strong>herald_mask</strong> (<em>ndarray</em><em>, </em><em>bool</em>) – Mask indicating which events are in the heralding channel.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>Counts(count, uncorrelated, vacuum)</strong> –</p>
<dl class="simple">
<dt>count<span class="classifier">ndarray</span></dt><dd><p>Counts for each photon number</p>
</dd>
<dt>uncorrelated :</dt><dd><p>Counts events not correlated with herald.
Only calculated when coinc_mask and herald_mask are
provided.</p>
</dd>
<dt>vacuum :</dt><dd><p>indicates if count[0] contains vacuum counts</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>named tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.counts.get_thresholds">
<span class="sig-prename descclassname"><span class="pre">tes.counts.</span></span><span class="sig-name descname"><span class="pre">get_thresholds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calibration_file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.counts.get_thresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the threshold from a calibration file.</p>
<p>Calibration file must be generated with “TES_Calibration.ipynb”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>calibration_file</strong> (<em>str</em>) – Calibration file path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>thresholds</strong> – Array with the threshold positions.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.counts.window">
<span class="sig-prename descclassname"><span class="pre">tes.counts.</span></span><span class="sig-name descname"><span class="pre">window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.counts.window" title="Permalink to this definition">¶</a></dt>
<dd><p>Find coincident events in the given window.</p>
<p>Get offsets from the current index ind in abs_time that are in the
relative time window defined by low and high.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ind</strong> (<em>int</em>) – Current index for abs_time.</p></li>
<li><p><strong>abs_time</strong> (<em>ndarray</em>) – Absolute times.</p></li>
<li><p><strong>low</strong> (<em>float</em>) – Starting point of the relative window.</p></li>
<li><p><strong>high</strong> (<em>float</em>) – Ending point of the relative window.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(low_index, high_index)</strong> – coincident times are abs_time[low_index:ind+high_index]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.data">
<span id="tes-data-module"></span><h2>tes.data module<a class="headerlink" href="#module-tes.data" title="Permalink to this headline">¶</a></h2>
<p>Functions:</p>
<ol class="arabic simple">
<li><p>FpgaStats</p></li>
<li><p>capture</p></li>
<li><p>read_mca</p></li>
<li><p>av_trace</p></li>
<li><p>_memmap_data</p></li>
</ol>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>FpgaStats</p></li>
<li><p>CaptureResult</p></li>
<li><p>CaptureData</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="tes.data.CaptureData">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">CaptureData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.CaptureData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py property">
<dt class="sig sig-object py" id="tes.data.CaptureData.homogeneous">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">homogeneous</span></span><a class="headerlink" href="#tes.data.CaptureData.homogeneous" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.data.CaptureData.mask">
<span class="sig-name descname"><span class="pre">mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.CaptureData.mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.data.CaptureResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">CaptureResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ticks</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traces</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mca</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropped</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invalid</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.CaptureResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.data.CaptureResult" title="tes.data.CaptureResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.data.CaptureResult</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.data.FpgaStats">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">FpgaStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dropped</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bad</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mca</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">types</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.FpgaStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tes.data.FpgaOutputStats</span></code></p>
<p>Class holding FPGA ethernet output statistics</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.data.av_trace">
<span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">av_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.av_trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Capture an average trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> – Timeout value in seconds.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.data.capture">
<span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">capture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">access_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ticks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">events</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conversion_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.capture" title="Permalink to this definition">¶</a></dt>
<dd><p>Capture FPGA output as a collection of data and index files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – </p></li>
<li><p><strong>measurement</strong> – </p></li>
<li><p><strong>ticks</strong> – </p></li>
<li><p><strong>events</strong> – </p></li>
<li><p><strong>write_mode</strong> – </p></li>
<li><p><strong>conversion_mode</strong> – </p></li>
<li><p><strong>capture_mode</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.data.fpga_stats">
<span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">fpga_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.fpga_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Diagnostic statistics for the FPGA ethernet output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>float</em>) – time to capture statistics for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>FpgaStats object that subclasses namedtuple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.data.read_mca">
<span class="sig-prename descclassname"><span class="pre">tes.data.</span></span><span class="sig-name descname"><span class="pre">read_mca</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data.read_mca" title="Permalink to this definition">¶</a></dt>
<dd><p>Capture MCA histograms</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em>) – number of histograms to capture</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of tes.mca.Distributions.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.data_acquisition">
<span id="tes-data-acquisition-module"></span><h2>tes.data_acquisition module<a class="headerlink" href="#module-tes.data_acquisition" title="Permalink to this headline">¶</a></h2>
<p>Module used to perform measurements with the TES.</p>
<p>Functions:</p>
<ol class="arabic simple">
<li><p>trace_drive</p></li>
<li><p>pulse_drive</p></li>
</ol>
<dl class="py function">
<dt class="sig sig-object py" id="tes.data_acquisition.pulse_drive">
<span class="sig-prename descclassname"><span class="pre">tes.data_acquisition.</span></span><span class="sig-name descname"><span class="pre">pulse_drive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_sub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datapath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data_acquisition.pulse_drive" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform measurements over TES traces.</p>
<dl class="simple">
<dt>Measure the following characteristics of TES traces:</dt><dd><ol class="arabic simple">
<li><p>Length</p></li>
<li><p>Area</p></li>
<li><p>Maximum slope or height</p></li>
<li><p>Rise Time</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>int</em>) – Time in seconds to take measurements.</p></li>
<li><p><strong>channel</strong> (<em>int</em>) – Processing channel chosen to take measurements.</p></li>
<li><p><strong>p_thres</strong> (<em>int</em>) – Pulse threshold chosen using the MCA.</p></li>
<li><p><strong>s_thres</strong> (<em>int</em>) – Slope threshold chosen using the MCA.</p></li>
<li><p><strong>base_sub</strong> (<em>bool</em>) – If True, the baseline correction will be activated.
It can automatically update the baseline level in
the case where it changes.</p></li>
<li><p><strong>datapath</strong> (<em>str</em>) – Folder where the registers will be saved.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file where the registers will be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.data_acquisition.trace_drive">
<span class="sig-prename descclassname"><span class="pre">tes.data_acquisition.</span></span><span class="sig-name descname"><span class="pre">trace_drive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_sub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datapath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.data_acquisition.trace_drive" title="Permalink to this definition">¶</a></dt>
<dd><p>Record TES traces.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>int</em>) – Time in seconds to take measurements.</p></li>
<li><p><strong>channel</strong> (<em>int</em>) – Processing channel chosen to take measurements.</p></li>
<li><p><strong>p_thres</strong> (<em>int</em>) – Pulse threshold chosen using the MCA.</p></li>
<li><p><strong>s_thres</strong> (<em>int</em>) – Slope threshold chosen using the MCA.</p></li>
<li><p><strong>base_sub</strong> (<em>bool</em>) – If True, the baseline correction will be activated.
It can automatically update the baseline level in
the case where it changes.</p></li>
<li><p><strong>datapath</strong> (<em>str</em>) – Folder where the registers will be saved.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Name of the file where the registers will be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Keep your trace measurements up to 1 minute.</p>
</dd></dl>

</section>
<section id="module-tes.folder_management">
<span id="tes-folder-management-module"></span><h2>tes.folder_management module<a class="headerlink" href="#module-tes.folder_management" title="Permalink to this headline">¶</a></h2>
<p>Module with convenient functions for folder management.</p>
<p>Contains:
- find_folders
- manage_folders</p>
<dl class="py function">
<dt class="sig sig-object py" id="tes.folder_management.find_folders">
<span class="sig-prename descclassname"><span class="pre">tes.folder_management.</span></span><span class="sig-name descname"><span class="pre">find_folders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">master_folder</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.folder_management.find_folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for folders inside the given address.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>master_folder</strong> (<em>string</em>) – address of the master folder on local computer.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AttributeError:</strong> – Raises error when no folder can be found.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>measurements</strong> – list with the address of folders inside master_folder.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.folder_management.manage_folders">
<span class="sig-prename descclassname"><span class="pre">tes.folder_management.</span></span><span class="sig-name descname"><span class="pre">manage_folders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurement_folders</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.folder_management.manage_folders" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a folder structure for a given measurement set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<em>integer</em>) – Select the measurement folder to be analysed</p></li>
<li><p><strong>measurements</strong> (<em>list</em>) – contains all addresses of measurement folders</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AttributeError:</strong> – Raises error when no folder can be found.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>datapath<span class="classifier">path</span></dt><dd><p>address of the measurement folder</p>
</dd>
<dt>folder_analysis<span class="classifier">path</span></dt><dd><p>address of the analysis folder</p>
</dd>
<dt>folder_figures<span class="classifier">path</span></dt><dd><p>address of the figures folder</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>tuple with</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.maps">
<span id="tes-maps-module"></span><h2>tes.maps module<a class="headerlink" href="#module-tes.maps" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>RegisterError</p></li>
<li><p>Borg</p></li>
<li><p>Transport_base</p></li>
<li><p>_ZmqTransport</p></li>
<li><p>_DirectSerial</p></li>
<li><p>RegInfo</p></li>
</ol>
<p>Functions:</p>
<ol class="arabic simple">
<li><p>_map_str</p></li>
<li><p>def _field_str</p></li>
<li><p>_cpu_version</p></li>
<li><p>_from_onehot</p></li>
<li><p>_to_onehot</p></li>
<li><p>_to_cf</p></li>
<li><p>_from_cf</p></li>
<li><p>_to_gain(g):</p></li>
<li><p>_from_gain</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="tes.maps.RegInfo">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.maps.</span></span><span class="sig-name descname"><span class="pre">RegInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strobe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_transform</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loadable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.maps.RegInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class describing A FPGA register””</p>
<dl class="py method">
<dt class="sig sig-object py" id="tes.maps.RegInfo.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.maps.RegInfo.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tes.maps.RegInfo.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.maps.RegInfo.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="tes.maps.RegisterError">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">tes.maps.</span></span><span class="sig-name descname"><span class="pre">RegisterError</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">non_hex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bad_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'OKAY'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.maps.RegisterError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeError</span></code></p>
</dd></dl>

</section>
<section id="module-tes.mca">
<span id="tes-mca-module"></span><h2>tes.mca module<a class="headerlink" href="#module-tes.mca" title="Permalink to this headline">¶</a></h2>
<p>MCA low level control.</p>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>Value</p></li>
<li><p>Trigger</p></li>
<li><p>Qualifier</p></li>
<li><p>Distribution</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="tes.mca.Distribution">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.mca.</span></span><span class="sig-name descname"><span class="pre">Distribution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca.Distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>wrapper for transmitted zmq frame representing a MCA distribution</p>
<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.bin_width">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">bin_width</span></span><a class="headerlink" href="#tes.mca.Distribution.bin_width" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.bins">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">bins</span></span><a class="headerlink" href="#tes.mca.Distribution.bins" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.channel">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">channel</span></span><a class="headerlink" href="#tes.mca.Distribution.channel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.highest_value">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">highest_value</span></span><a class="headerlink" href="#tes.mca.Distribution.highest_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.last_bin">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">last_bin</span></span><a class="headerlink" href="#tes.mca.Distribution.last_bin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.lowest_value">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">lowest_value</span></span><a class="headerlink" href="#tes.mca.Distribution.lowest_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.most_frequent">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">most_frequent</span></span><a class="headerlink" href="#tes.mca.Distribution.most_frequent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.overflow">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">overflow</span></span><a class="headerlink" href="#tes.mca.Distribution.overflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.qualifier">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">qualifier</span></span><a class="headerlink" href="#tes.mca.Distribution.qualifier" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.start_time">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">start_time</span></span><a class="headerlink" href="#tes.mca.Distribution.start_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.stop_time">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">stop_time</span></span><a class="headerlink" href="#tes.mca.Distribution.stop_time" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.total">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">total</span></span><a class="headerlink" href="#tes.mca.Distribution.total" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.trigger">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">trigger</span></span><a class="headerlink" href="#tes.mca.Distribution.trigger" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.underflow">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">underflow</span></span><a class="headerlink" href="#tes.mca.Distribution.underflow" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tes.mca.Distribution.value">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#tes.mca.Distribution.value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.mca.Qualifier">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.mca.</span></span><span class="sig-name descname"><span class="pre">Qualifier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca.Qualifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.above">
<span class="sig-name descname"><span class="pre">above</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#tes.mca.Qualifier.above" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.above_area">
<span class="sig-name descname"><span class="pre">above_area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.mca.Qualifier.above_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.all">
<span class="sig-name descname"><span class="pre">all</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.mca.Qualifier.all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.armed">
<span class="sig-name descname"><span class="pre">armed</span></span><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#tes.mca.Qualifier.armed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.disabled">
<span class="sig-name descname"><span class="pre">disabled</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.mca.Qualifier.disabled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.rise">
<span class="sig-name descname"><span class="pre">rise</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#tes.mca.Qualifier.rise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.valid_peak1">
<span class="sig-name descname"><span class="pre">valid_peak1</span></span><em class="property"> <span class="pre">=</span> <span class="pre">9</span></em><a class="headerlink" href="#tes.mca.Qualifier.valid_peak1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.valid_peak2">
<span class="sig-name descname"><span class="pre">valid_peak2</span></span><em class="property"> <span class="pre">=</span> <span class="pre">10</span></em><a class="headerlink" href="#tes.mca.Qualifier.valid_peak2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.valid_peak3">
<span class="sig-name descname"><span class="pre">valid_peak3</span></span><em class="property"> <span class="pre">=</span> <span class="pre">11</span></em><a class="headerlink" href="#tes.mca.Qualifier.valid_peak3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.valid_rise">
<span class="sig-name descname"><span class="pre">valid_rise</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.mca.Qualifier.valid_rise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.will_arm">
<span class="sig-name descname"><span class="pre">will_arm</span></span><em class="property"> <span class="pre">=</span> <span class="pre">7</span></em><a class="headerlink" href="#tes.mca.Qualifier.will_arm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Qualifier.will_cross">
<span class="sig-name descname"><span class="pre">will_cross</span></span><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#tes.mca.Qualifier.will_cross" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.mca.Trigger">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.mca.</span></span><span class="sig-name descname"><span class="pre">Trigger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca.Trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.cfd_high">
<span class="sig-name descname"><span class="pre">cfd_high</span></span><em class="property"> <span class="pre">=</span> <span class="pre">9</span></em><a class="headerlink" href="#tes.mca.Trigger.cfd_high" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.cfd_low">
<span class="sig-name descname"><span class="pre">cfd_low</span></span><em class="property"> <span class="pre">=</span> <span class="pre">10</span></em><a class="headerlink" href="#tes.mca.Trigger.cfd_low" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.clock">
<span class="sig-name descname"><span class="pre">clock</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.mca.Trigger.clock" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.disabled">
<span class="sig-name descname"><span class="pre">disabled</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.mca.Trigger.disabled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.f_0xing">
<span class="sig-name descname"><span class="pre">f_0xing</span></span><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#tes.mca.Trigger.f_0xing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.max_slope">
<span class="sig-name descname"><span class="pre">max_slope</span></span><em class="property"> <span class="pre">=</span> <span class="pre">11</span></em><a class="headerlink" href="#tes.mca.Trigger.max_slope" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.pulse_t_neg">
<span class="sig-name descname"><span class="pre">pulse_t_neg</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.mca.Trigger.pulse_t_neg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.pulse_t_pos">
<span class="sig-name descname"><span class="pre">pulse_t_pos</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.mca.Trigger.pulse_t_pos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.s_0xing">
<span class="sig-name descname"><span class="pre">s_0xing</span></span><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#tes.mca.Trigger.s_0xing" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.s_0xing_neg">
<span class="sig-name descname"><span class="pre">s_0xing_neg</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#tes.mca.Trigger.s_0xing_neg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.s_0xing_pos">
<span class="sig-name descname"><span class="pre">s_0xing_pos</span></span><em class="property"> <span class="pre">=</span> <span class="pre">7</span></em><a class="headerlink" href="#tes.mca.Trigger.s_0xing_pos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Trigger.slope_t_pos">
<span class="sig-name descname"><span class="pre">slope_t_pos</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#tes.mca.Trigger.slope_t_pos" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tes.mca.Value">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.mca.</span></span><span class="sig-name descname"><span class="pre">Value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca.Value" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tes.base.VhdlEnum" title="tes.base.VhdlEnum"><code class="xref py py-class docutils literal notranslate"><span class="pre">tes.base.VhdlEnum</span></code></a></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.cfd_high">
<span class="sig-name descname"><span class="pre">cfd_high</span></span><em class="property"> <span class="pre">=</span> <span class="pre">9</span></em><a class="headerlink" href="#tes.mca.Value.cfd_high" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.disabled">
<span class="sig-name descname"><span class="pre">disabled</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.mca.Value.disabled" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.f">
<span class="sig-name descname"><span class="pre">f</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.mca.Value.f" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.f_area">
<span class="sig-name descname"><span class="pre">f_area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.mca.Value.f_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.f_extrema">
<span class="sig-name descname"><span class="pre">f_extrema</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.mca.Value.f_extrema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.pulse_area">
<span class="sig-name descname"><span class="pre">pulse_area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">7</span></em><a class="headerlink" href="#tes.mca.Value.pulse_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.pulse_timer">
<span class="sig-name descname"><span class="pre">pulse_timer</span></span><em class="property"> <span class="pre">=</span> <span class="pre">10</span></em><a class="headerlink" href="#tes.mca.Value.pulse_timer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.raw">
<span class="sig-name descname"><span class="pre">raw</span></span><em class="property"> <span class="pre">=</span> <span class="pre">8</span></em><a class="headerlink" href="#tes.mca.Value.raw" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.rise_timer">
<span class="sig-name descname"><span class="pre">rise_timer</span></span><em class="property"> <span class="pre">=</span> <span class="pre">11</span></em><a class="headerlink" href="#tes.mca.Value.rise_timer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.s">
<span class="sig-name descname"><span class="pre">s</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#tes.mca.Value.s" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.s_area">
<span class="sig-name descname"><span class="pre">s_area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#tes.mca.Value.s_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.mca.Value.s_extrema">
<span class="sig-name descname"><span class="pre">s_extrema</span></span><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#tes.mca.Value.s_extrema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-tes.mca_control">
<span id="tes-mca-control-module"></span><h2>tes.mca_control module<a class="headerlink" href="#module-tes.mca_control" title="Permalink to this headline">¶</a></h2>
<p>Module with functions to control the MCA.</p>
<p>Should be used together with the Jupyter Notebook
“MCA_and_Measurements.ipynb”.</p>
<p>Functions defined here:</p>
<ol class="arabic simple">
<li><p>configure_channels</p></li>
<li><p>baseline_offset</p></li>
<li><p>pulse_threshold</p></li>
<li><p>slope_threshold</p></li>
<li><p>area_histogram</p></li>
</ol>
<dl class="py function">
<dt class="sig sig-object py" id="tes.mca_control.area_histogram">
<span class="sig-prename descclassname"><span class="pre">tes.mca_control.</span></span><span class="sig-name descname"><span class="pre">area_histogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_thres</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xrange</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yrange</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca_control.area_histogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot area histogram given the thresholds chosen.</p>
<p>Always run this function to realise a sanity test for the selected
values for baseline offset, pulse threshold and slope
threshold.
You should be able to see clear distinct peaks indicating that
the current configuration of the TES can discriminate number of
photons.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registers</strong> (<em>dict</em>) – Dictionary that stores the values of all registers that control
the measurements performed by the FPGA.</p></li>
<li><p><strong>time</strong> (<em>int</em>) – Time (in seconds) the histogram should be accumulated over.</p></li>
<li><p><strong>channel</strong> (<em>int</em>) – Channel to be analysed.</p></li>
<li><p><strong>bin_width</strong> (<em>int</em>) – 2^(bin_width) will be the width of the histogram bin.</p></li>
<li><p><strong>s_thres</strong> (<em>int</em>) – Determine the pulse threshold.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(fig,)</strong> – Figure with the plotted histogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.mca_control.baseline_offset">
<span class="sig-prename descclassname"><span class="pre">tes.mca_control.</span></span><span class="sig-name descname"><span class="pre">baseline_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_offset</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca_control.baseline_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the detection baseline for TES detections.</p>
<p>Change the values of baseline_offset until you see a big peak
in the  histogram. When the peak appears, put its centre at
x = 0 by choosing an  appropriate baseline_offset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registers</strong> (<em>dict</em>) – Dictionary that stores the values of all registers that
control the measurements performed by the FPGA.</p></li>
<li><p><strong>time</strong> (<em>int</em>) – Time (in seconds) the histogram should be accumulated over.</p></li>
<li><p><strong>channel</strong> (<em>int</em>) – Channel to be analysed.</p></li>
<li><p><strong>bin_width</strong> (<em>int</em>) – 2^(bin_width) will be the width of the histogram bin</p></li>
<li><p><strong>baseline_offset</strong> (<em>int</em>) – Determine the baseline offset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(fig,)</strong> – Figure with the plotted histogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.mca_control.configure_channels">
<span class="sig-prename descclassname"><span class="pre">tes.mca_control.</span></span><span class="sig-name descname"><span class="pre">configure_channels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">adc_channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proc_channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca_control.configure_channels" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure connections to ADC channels.</p>
<p>Connects the selected ADC channel (check in the lab to which
ADC channel you connected the TES cables) to the selected
processing channel (digital channel to which you will refer
in the next steps of the notebook).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registers</strong> (<em>dict</em>) – Dictionary that stores the values of all registers that control
the measurements performed by the FPGA.</p></li>
<li><p><strong>adc_channel</strong> (<em>int</em>) – Determine which adc channel is being used.
May assume values 0-7.</p></li>
<li><p><strong>proc_channel</strong> (<em>int</em>) – Determine which processing channel is being used.
May assume values 0-1.</p></li>
<li><p><strong>invert</strong> (<em>bool</em>) – Determines if the signal polarisation should be inverted.
True inverts, False does not invert.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.mca_control.pulse_threshold">
<span class="sig-prename descclassname"><span class="pre">tes.mca_control.</span></span><span class="sig-name descname"><span class="pre">pulse_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_thres</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca_control.pulse_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the pulse threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registers</strong> (<em>dict</em>) – Dictionary that stores the values of all registers that control
the measurements performed by the FPGA.</p></li>
<li><p><strong>time</strong> (<em>int</em>) – Time (in seconds) the histogram should be accumulated over.</p></li>
<li><p><strong>channel</strong> (<em>int</em>) – Channel to be analysed.</p></li>
<li><p><strong>bin_width</strong> (<em>int</em>) – 2^(bin_width) will be the width of the histogram bin.</p></li>
<li><p><strong>pulse_threshold</strong> (<em>int</em>) – Determine the pulse threshold.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(fig,)</strong> – Figure with the plotted histogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.mca_control.slope_threshold">
<span class="sig-prename descclassname"><span class="pre">tes.mca_control.</span></span><span class="sig-name descname"><span class="pre">slope_threshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_thres</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.mca_control.slope_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the slope threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>registers</strong> (<em>dict</em>) – Dictionary that stores the values of all registers that control
the measurements performed by the FPGA.</p></li>
<li><p><strong>time</strong> (<em>int</em>) – Time (in seconds) the histogram should be accumulated over.</p></li>
<li><p><strong>channel</strong> (<em>in</em>) – Channel to be analysed.</p></li>
<li><p><strong>bin_width</strong> (<em>int</em>) – 2^(bin_width) will be the width of the histogram bin.</p></li>
<li><p><strong>s_thres</strong> (<em>int</em>) – Determine the pulse threshold.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>(fig,)</strong> – Figure with the plotted histogram.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes.protocol">
<span id="tes-protocol-module"></span><h2>tes.protocol module<a class="headerlink" href="#module-tes.protocol" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>PayloadType</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="tes.protocol.PayloadType">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.protocol.</span></span><span class="sig-name descname"><span class="pre">PayloadType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.protocol.PayloadType" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.IntEnum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.area">
<span class="sig-name descname"><span class="pre">area</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#tes.protocol.PayloadType.area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.mca">
<span class="sig-name descname"><span class="pre">mca</span></span><em class="property"> <span class="pre">=</span> <span class="pre">5</span></em><a class="headerlink" href="#tes.protocol.PayloadType.mca" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.peak">
<span class="sig-name descname"><span class="pre">peak</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tes.protocol.PayloadType.peak" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.pulse">
<span class="sig-name descname"><span class="pre">pulse</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#tes.protocol.PayloadType.pulse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.tick">
<span class="sig-name descname"><span class="pre">tick</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#tes.protocol.PayloadType.tick" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.protocol.PayloadType.trace">
<span class="sig-name descname"><span class="pre">trace</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#tes.protocol.PayloadType.trace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-tes.registers">
<span id="tes-registers-module"></span><h2>tes.registers module<a class="headerlink" href="#module-tes.registers" title="Permalink to this headline">¶</a></h2>
<p>Functions:</p>
<ol class="arabic simple">
<li><p>_adc_spi_transform</p></li>
<li><p>_channel_transform</p></li>
<li><p>save</p></li>
<li><p>load</p></li>
</ol>
<p>Classes:</p>
<ol class="arabic simple">
<li><p>_RegisterMap</p></li>
<li><p>_RegisterGroup</p></li>
<li><p>_GroupIterator</p></li>
<li><p>Registers</p></li>
</ol>
<dl class="py class">
<dt class="sig sig-object py" id="tes.registers.Registers">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tes.registers.</span></span><span class="sig-name descname"><span class="pre">Registers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.registers.Registers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tes.registers._RegisterMap</span></code></p>
<p>Client for reading and writing the internal FPGA control registers.</p>
<p>Registers are arranged in functional groups and accessed through an
instance of the Registers class. Let r be an instance of Registers
then r.regname  references the regname register while r.groupname.regname
the regname register of the  groupname group. Some groups support
indexing to reference a register for a particular channel. Slicing and
fancy indexing are supported while ommiting indexing is equvalent  to
referencing ALL channels.</p>
<p>For example:
r.groupname[0].regname refers to the regname register of the groupname group
for channel 0. While r.groupname.regname refers to the same register for all
channels. Therefore, r.groupname.regname will return a list containing the
value of the register for each channel, r.groupname.regname = value will set
the for all channels to the same value and
r.groupname.regname = [value0, value1, …, valuen] will broadcast the list
of values to the appropriate channel.</p>
<p>Groups without indexing:
No groupnme - accesses a general register. See help(Registers).
mca - accesses the registers controlling the MCA. See help(McaRegisters).</p>
<p>Groups supporting indexing:
channel controls input to the processing channels. See help(ChannelRegisters
event  controls event output. See help(EventRegisters).
baseline  controls the baseline process. See help(BaselineRegisters).
cfd  controls the constant fraction process. See help(CfdRegisters).
adc  controls the ADC chips. See help(AdcRegisters).</p>
<p>The the number of channels in the adc group is twice the value of the
general register adc_chips while the number of channels in all other
groups is the value of the general register channel_count.</p>
<p>TODO add dict indexing</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.adc">
<span class="sig-name descname"><span class="pre">adc</span></span><a class="headerlink" href="#tes.registers.Registers.adc" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling the ADC chips on the FMC108 digitiser
card.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.baseline">
<span class="sig-name descname"><span class="pre">baseline</span></span><a class="headerlink" href="#tes.registers.Registers.baseline" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling baseline correction.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.cfd">
<span class="sig-name descname"><span class="pre">cfd</span></span><a class="headerlink" href="#tes.registers.Registers.cfd" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling the cfd process.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><a class="headerlink" href="#tes.registers.Registers.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling channel input.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.event">
<span class="sig-name descname"><span class="pre">event</span></span><a class="headerlink" href="#tes.registers.Registers.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling event output.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tes.registers.Registers.mca">
<span class="sig-name descname"><span class="pre">mca</span></span><a class="headerlink" href="#tes.registers.Registers.mca" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers controlling the MCA</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.registers.load">
<span class="sig-prename descclassname"><span class="pre">tes.registers.</span></span><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.registers.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.registers.save">
<span class="sig-prename descclassname"><span class="pre">tes.registers.</span></span><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.registers.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tes.traces">
<span id="tes-traces-module"></span><h2>tes.traces module<a class="headerlink" href="#module-tes.traces" title="Permalink to this headline">¶</a></h2>
<p>Module to be used with jupyter notebook TES Trace Generator.</p>
<p>Contains:</p>
<ol class="arabic simple">
<li><p>extract_data</p></li>
<li><p>create_statistics_file</p></li>
<li><p>plot_traces</p></li>
<li><p>correct_xticks</p></li>
<li><p>correct_yticks</p></li>
</ol>
<dl class="py function">
<dt class="sig sig-object py" id="tes.traces.correct_xticks">
<span class="sig-prename descclassname"><span class="pre">tes.traces.</span></span><span class="sig-name descname"><span class="pre">correct_xticks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.traces.correct_xticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Properly edit the xticks for a matplotlib plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ax</strong> (<em>axis object</em>) – Axis with x-axis to be edited.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ax</strong> (<em>axis object</em>) – Edited axis object.</p></li>
<li><p><strong>expx</strong> (<em>int</em>) – Integer to be added to the x-axis label.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.traces.correct_yticks">
<span class="sig-prename descclassname"><span class="pre">tes.traces.</span></span><span class="sig-name descname"><span class="pre">correct_yticks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.traces.correct_yticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Properly edit the yticks for a matplotlib plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ax</strong> (<em>axis object</em>) – Axis with x-axis to be edited.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ax</strong> (<em>axis object</em>) – Edited axis object.</p></li>
<li><p><strong>expy</strong> (<em>int</em>) – Integer to be added to the x-axis label.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.traces.create_statistics_file">
<span class="sig-prename descclassname"><span class="pre">tes.traces.</span></span><span class="sig-name descname"><span class="pre">create_statistics_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measurement_folders</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.traces.create_statistics_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create file with measurements statistics in measurement folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>measurement_folder</strong> (<em>list of paths</em>) – list containing the paths of the folders where the measurements
are stored and where the stats files will be created.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.traces.extract_data">
<span class="sig-prename descclassname"><span class="pre">tes.traces.</span></span><span class="sig-name descname"><span class="pre">extract_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datapath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">measurements</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.traces.extract_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data and registers for a given address.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datapath</strong> (<em>str</em>) – String containing the measurement folder address.</p></li>
<li><p><strong>measurements</strong> (<em>list of paths</em>) – List with the paths of all measurement folders.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>data</strong> (<em>tes.data.CaptureData</em>) – Contains the data to be plotted.</p></li>
<li><p><strong>registers</strong> (<em>TYPE</em>) – Contains the information required to plot timing information
properly.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tes.traces.plot_traces">
<span class="sig-prename descclassname"><span class="pre">tes.traces.</span></span><span class="sig-name descname"><span class="pre">plot_traces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">number_traces</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_register</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">choose_trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tes.traces.plot_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot traces using collected using the FPGA.</p>
<dl class="simple">
<dt>Can plot:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>a single trace (number_traces = 1, slope = False,</dt><dd><p>details = False)</p>
</dd>
</dl>
</li>
<li><p>many traces (number_traces &gt; 1)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="#tes.data.CaptureData" title="tes.data.CaptureData"><em>tes.data.CaptureData</em></a>) – Contains the data to be plotted.</p></li>
<li><p><strong>number_traces</strong> (<em>int</em>) – The number of different TES pulses to be plotted.</p></li>
<li><p><strong>trace_length</strong> (<em>int</em>) – The number of points in each TES pulse.</p></li>
<li><p><strong>time_register</strong> (<em>dict</em>) – Contains the time information for the pulses.</p></li>
<li><p><strong>choose_trace</strong> (<em>int</em>) – Choose a single TES pulse to plot.
(if number_traces == 1)</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axis</em>) – Figure axis where traces will be plotted.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-tes">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-tes" title="Permalink to this headline">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">tespackage</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">tes</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">tes package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.analysis">tes.analysis module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.base">tes.base module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.calibration">tes.calibration module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.counts">tes.counts module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.data">tes.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.data_acquisition">tes.data_acquisition module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.folder_management">tes.folder_management module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.maps">tes.maps module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.mca">tes.mca module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.mca_control">tes.mca_control module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.protocol">tes.protocol module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.registers">tes.registers module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes.traces">tes.traces module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tes">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">tes</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">tes</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Leonardo Assis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/tes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>